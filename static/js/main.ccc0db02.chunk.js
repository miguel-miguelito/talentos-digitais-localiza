(this["webpackJsonpsd-01-week16-react-redux-starwars-datatable-filters"]=this["webpackJsonpsd-01-week16-react-redux-starwars-datatable-filters"]||[]).push([[0],{21:function(e,t,n){e.exports=n(33)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),u=n.n(r),c=n(12),l=n.n(c),o=(n(31),n(3)),i=n(4),s=n(6),m=n(5),d=n(7),p=(n(32),n(1)),f=n(8),v=n(13),h=[{name:""}],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_PLANETS":return e;case"RECEIVE_PLANETS":return t.planets;default:return e}},E=function(){return function(e){return e({type:"REQUEST_PLANETS"}),fetch("https://swapi.co/api/planets").then((function(e){return e.json()})).then((function(t){e({type:"RECEIVE_PLANETS",planets:t.results})}))}};function C(e){return e.split("_").map((function(e){return"".concat(e[0].toUpperCase()).concat(e.substr(1))})).join(" ")}function O(e,t,n,a){return""===a||""===t?e:e.filter((function(e){return!("unknown"===e[t])&&function(e,t,n){switch(n){case">":return e>t;case"<":return e<t;case"===":return e===t;default:return!1}}(Number(e[t]),Number(a),n)}))}var j=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).setSortingRules=n.setSortingRules.bind(Object(v.a)(n)),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getData)()}},{key:"setSortingRules",value:function(e,t){var n=this.props,a=n.columnToBeSorted,r=n.order;return"unknown"===e[a]||Number(e[a])>Number(t[a])&&"ASC"===r||Number(e[a])<Number(t[a])&&"DESC"===r?1:-1}},{key:"filterData",value:function(){for(var e=this.props,t=e.data,n=e.name,a=e.arrayColumns,r=t,u=0;u<a.length;u+=1)r=O(r,this.props["valueSelectedColumn".concat(u+1)],this.props["valueSelectedComparison".concat(u+1)],this.props["valueNumber".concat(u+1)]);return function(e,t){var n=e.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())}));return 0===n.length?[{}]:n}(r,n)}},{key:"filterAndSortData",value:function(){var e=this.props,t=e.columnToBeSorted,n=e.order,a=this.filterData();if("name"===t){var r=a.map((function(e){return e[t]}));r.sort();var u=r.map((function(e){return a.find((function(n){return n[t]===e}))}));return"DESC"===n&&u.reverse(),u}return a.sort(this.setSortingRules),a}},{key:"render",value:function(){var e=this.filterAndSortData(),t=Object.keys(e[0]),n=t.indexOf("residents");return t=t.slice(0,n),u.a.createElement("div",null,u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",null,t.map((function(e){return u.a.createElement("th",{key:e},C(e))})))),u.a.createElement("tbody",null,e.map((function(e){var t=Object.values(e);return t=t.slice(0,n),u.a.createElement("tr",{key:e.name},t.map((function(e){return u.a.createElement("td",{key:e},e)})))})))))}}]),t}(r.Component),S=Object(a.b)((function(e){var t=e.data,n=e.filters[0].name,a=e.sorting.column,r=e.sorting.order,u=e.filters.slice(1).map((function(e){return e.numericValues.column})),c=e.filters.slice(1).reduce((function(e,t,n){var a;return Object(f.a)({},e,(a={},Object(p.a)(a,"valueSelectedColumn".concat(n+1),t.numericValues.column),Object(p.a)(a,"valueSelectedComparison".concat(n+1),t.numericValues.comparison),Object(p.a)(a,"valueNumber".concat(n+1),t.numericValues.value),a))}),{});return Object(f.a)({},c,{data:t,name:n,columnToBeSorted:a,order:r,arrayColumns:u})}),(function(e){return{getData:function(){return e(E())}}}))(j),y=n(20),g=[{name:""},{numericValues:{column:"",comparison:">",value:""}}],N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NAME_FILTER":return[{name:t.value}].concat(Object(y.a)(e.slice(1)));case"CHANGE_NUMERIC_VALUES_FILTERS":return e.splice(t.id,1,{numericValues:Object(f.a)({},e[t.id].numericValues,Object(p.a)({},t.name,t.value))}),e.concat(t.id===e.length-1&&t.id<5?[{numericValues:{column:"",comparison:">",value:""}}]:[]);case"DELETE_NUMERIC_VALUES_FILTERS":return e.filter((function(e,n){return t.id!==n}));default:return e}},k=function(e){return{type:"CHANGE_NAME_FILTER",value:e.target.value}},_=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.valueInput,n=e.handleChange;return u.a.createElement("div",{className:"filter"},u.a.createElement("input",{placeholder:"Search by name",value:t,onChange:n}))}}]),t}(r.Component),A=Object(a.b)((function(e){return{valueInput:e.filters[0].name}}),(function(e){return{handleChange:function(t){e(k(t))}}}))(_),V=function(e){var t=e.target,n=t.value,a=t.name,r=e.target.parentNode.id;return{type:"CHANGE_NUMERIC_VALUES_FILTERS",value:n,name:a,id:Number(r)}},R=function(e){var t=e.target.parentNode.id;return{type:"DELETE_NUMERIC_VALUES_FILTERS",id:Number(t)}};function L(e){return e.every((function(t,n){return""!==t||n===e.length-1}))}var T=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"addFilter",value:function(e){var t=this.props,n=t.arrayColumns,a=t.handleChange,r=t.handleClick,c=n.slice(0,e-1),l=["population","orbital_period","diameter","rotation_period","surface_water"].filter((function(e){return!c.includes(e)}));return u.a.createElement("div",{id:e,className:"filter",key:e},u.a.createElement("select",{name:"column",onChange:a,value:this.props["valueSelectedColumn".concat(e)]},u.a.createElement("option",{value:"",disabled:!0},"Select column"),l.map((function(e){return u.a.createElement("option",{key:e,value:e},C(e))}))),u.a.createElement("select",{name:"comparison",onChange:a,value:this.props["valueSelectedComparison".concat(e)]},u.a.createElement("option",{value:">"},"greater than"),u.a.createElement("option",{value:"<"},"less than"),u.a.createElement("option",{value:"==="},"equal to")),u.a.createElement("input",{type:"number",placeholder:"Enter a number",name:"value",onChange:a,value:this.props["valueNumber".concat(e)]}),u.a.createElement("button",{type:"button",onClick:r},"X"))}},{key:"addMoreAndMoreFilters",value:function(){var e,t=this,n=this.props.arrayValues,a=this.props.arrayColumns;if(L(n)&&L(a))e=u.a.createElement("div",null,n.map((function(e,n){return t.addFilter(n+1,e)})));else{var r=n.slice(0,n.length-1);e=u.a.createElement("div",null,r.map((function(e,n){return t.addFilter(n+1)})))}return e}},{key:"render",value:function(){return u.a.createElement("div",null,this.addMoreAndMoreFilters())}}]),t}(r.Component),I=Object(a.b)((function(e){var t=e.filters.slice(1).reduce((function(e,t,n){var a;return Object(f.a)({},e,(a={},Object(p.a)(a,"valueSelectedColumn".concat(n+1),t.numericValues.column),Object(p.a)(a,"valueSelectedComparison".concat(n+1),t.numericValues.comparison),Object(p.a)(a,"valueNumber".concat(n+1),t.numericValues.value),a))}),{}),n=e.filters.slice(1).map((function(e){return e.numericValues.value})),a=e.filters.slice(1).map((function(e){return e.numericValues.column}));return Object(f.a)({},t,{arrayValues:n,arrayColumns:a})}),(function(e){return{handleChange:function(t){e(V(t))},handleClick:function(t){e(R(t))}}}))(T),w={column:"name",order:"ASC"},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SORTING":return Object(f.a)({},e,Object(p.a)({},t.name,t.value));default:return e}},U=function(e){var t=e.target;return{type:"CHANGE_SORTING",name:t.name,value:t.value}},F=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"renderColumnsSelect",value:function(){var e=this.props.handleChange;return u.a.createElement("select",{name:"column",onChange:e,defaultValue:""},u.a.createElement("option",{value:"",disabled:!0},"Select column"),["name","population","orbital_period","diameter","rotation_period","surface_water"].map((function(e){return u.a.createElement("option",{key:e,value:e},C(e))})))}},{key:"renderOrderSelect",value:function(){var e=this.props.handleChange;return u.a.createElement("select",{name:"order",onChange:e,defaultValue:"ASC"},u.a.createElement("option",{value:"ASC"},"asc. order"),u.a.createElement("option",{value:"DESC"},"desc. order"))}},{key:"render",value:function(){return u.a.createElement("div",{className:"sorting"},this.renderColumnsSelect(),this.renderOrderSelect())}}]),t}(r.Component),M=Object(a.b)(null,(function(e){return{handleChange:function(t){e(U(t))}}}))(F),G=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.isLoading;return u.a.createElement("div",{className:"App"},u.a.createElement("h1",null,"StarWars Datatable with Filters"),e&&"Loading...",!e&&u.a.createElement(M,null),!e&&u.a.createElement(A,null),!e&&u.a.createElement(I,null),u.a.createElement(S,null))}}]),t}(r.Component),H=Object(a.b)((function(e){return{isLoading:e.data.length<=1}}))(G),x=n(10),B=n(19),P=Object(x.c)({data:b,filters:N,sorting:D}),J=Object(x.d)(P,Object(x.a)(B.a));l.a.render(u.a.createElement(a.a,{store:J},u.a.createElement(H,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.ccc0db02.chunk.js.map